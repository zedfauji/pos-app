<Page
    x:Class="MagiDesk.Frontend.Views.ReceiptFormatDesignerPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="using:MagiDesk.Frontend.Views"
    xmlns:converters="using:MagiDesk.Frontend.Converters"
    mc:Ignorable="d">

    <Page.Resources>
        <!-- Converters -->
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        
        <!-- Use Theme Resources -->
        <SolidColorBrush x:Key="PrimaryBrush" Color="{ThemeResource SystemAccentColor}"/>
        <SolidColorBrush x:Key="SuccessBrush" Color="#107C10"/>
        <SolidColorBrush x:Key="WarningBrush" Color="#FF8C00"/>
        <SolidColorBrush x:Key="ErrorBrush" Color="#D13438"/>
        <SolidColorBrush x:Key="SurfaceBrush" Color="{ThemeResource ApplicationPageBackgroundThemeBrush}"/>
        <SolidColorBrush x:Key="CardBrush" Color="{ThemeResource CardBackgroundFillColorDefault}"/>
        <SolidColorBrush x:Key="BorderBrush" Color="{ThemeResource CardStrokeColorDefault}"/>
        <SolidColorBrush x:Key="TextPrimaryBrush" Color="{ThemeResource TextFillColorPrimary}"/>
        <SolidColorBrush x:Key="TextSecondaryBrush" Color="{ThemeResource TextFillColorSecondary}"/>

        <!-- Modern Card Style -->
        <Style x:Key="ModernCardStyle" TargetType="Border">
            <Setter Property="Background" Value="{ThemeResource CardBackgroundFillColorDefaultBrush}"/>
            <Setter Property="BorderBrush" Value="{ThemeResource ControlStrokeColorDefaultBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="8"/>
        </Style>

        <!-- Section Header Style -->
        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{ThemeResource TextFillColorPrimaryBrush}"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
        </Style>

        <!-- Label Style -->
        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Foreground" Value="{ThemeResource TextFillColorPrimaryBrush}"/>
            <Setter Property="Margin" Value="0,0,0,4"/>
        </Style>

        <!-- Primary Button Style -->
        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{ThemeResource AccentFillColorDefaultBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="MinWidth" Value="120"/>
        </Style>

        <!-- Secondary Button Style -->
        <Style x:Key="SecondaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{ThemeResource AccentFillColorDefaultBrush}"/>
            <Setter Property="BorderBrush" Value="{ThemeResource AccentFillColorDefaultBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="MinWidth" Value="120"/>
        </Style>

        <!-- Preview Card Style -->
        <Style x:Key="PreviewCardStyle" TargetType="Border">
            <Setter Property="Background" Value="{ThemeResource CardBackgroundFillColorDefaultBrush}"/>
            <Setter Property="BorderBrush" Value="{ThemeResource ControlStrokeColorDefaultBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="Margin" Value="4"/>
        </Style>
    </Page.Resources>

    <Grid Background="{ThemeResource SolidBackgroundFillColorBaseBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" Padding="24,20" Margin="0,0,0,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0">
                    <TextBlock Text="Receipt Format Designer" FontSize="28" FontWeight="Bold" 
                             Foreground="{StaticResource TextPrimaryBrush}"/>
                    <TextBlock Text="Design and customize your receipt layout with live preview" FontSize="16" 
                             Foreground="{ThemeResource TextFillColorSecondaryBrush}" Margin="0,4,0,0"/>
                </StackPanel>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="12">
                    <Button Content="ðŸ’¾ Save Settings" Style="{StaticResource PrimaryButtonStyle}"
                            Click="SaveSettings_Click"/>
                    <Button Content="Reset to Default" Style="{StaticResource SecondaryButtonStyle}"
                            Click="ResetToDefault_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content -->
        <ScrollViewer Grid.Row="1" VerticalScrollMode="Auto" VerticalScrollBarVisibility="Auto" Padding="8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*" MinWidth="400"/>
                    <ColumnDefinition Width="8"/>
                    <ColumnDefinition Width="3*" MinWidth="500"/>
                </Grid.ColumnDefinitions>

                <!-- Settings Panel -->
                <StackPanel Grid.Column="0" Spacing="16">
                    
                    <!-- Business Information -->
                    <Border Style="{StaticResource ModernCardStyle}">
                        <StackPanel Spacing="12">
                            <TextBlock Text="ðŸ¢ Business Information" Style="{StaticResource SectionHeaderStyle}"/>
                            
                            <StackPanel Spacing="8">
                                <TextBlock Text="Business Name" Style="{StaticResource LabelStyle}"/>
                                <TextBox x:Name="BusinessNameTextBox" PlaceholderText="Enter business name"
                                        Text="{x:Bind ViewModel.BusinessName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                            </StackPanel>
                            
                            <StackPanel Spacing="8">
                                <TextBlock Text="Address" Style="{StaticResource LabelStyle}"/>
                                <TextBox x:Name="BusinessAddressTextBox" PlaceholderText="Enter business address"
                                        Text="{x:Bind ViewModel.BusinessAddress, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                            </StackPanel>
                            
                            <StackPanel Spacing="8">
                                <TextBlock Text="Phone Number" Style="{StaticResource LabelStyle}"/>
                                <TextBox x:Name="BusinessPhoneTextBox" PlaceholderText="Enter phone number"
                                        Text="{x:Bind ViewModel.BusinessPhone, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                            </StackPanel>
                            
                            <StackPanel Spacing="8">
                                <TextBlock Text="Email" Style="{StaticResource LabelStyle}"/>
                                <TextBox x:Name="BusinessEmailTextBox" PlaceholderText="Enter email address"
                                        Text="{x:Bind ViewModel.BusinessEmail, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                            </StackPanel>
                            
                            <StackPanel Spacing="8">
                                <TextBlock Text="Website" Style="{StaticResource LabelStyle}"/>
                                <TextBox x:Name="BusinessWebsiteTextBox" PlaceholderText="Enter website URL"
                                        Text="{x:Bind ViewModel.BusinessWebsite, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Logo Settings -->
                    <Border Style="{StaticResource ModernCardStyle}">
                        <StackPanel Spacing="12">
                            <TextBlock Text="ðŸ–¼ï¸ Logo Settings" Style="{StaticResource SectionHeaderStyle}"/>
                            
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <StackPanel Grid.Column="0" Spacing="8">
                                    <CheckBox x:Name="ShowLogoCheckBox" Content="Show Logo on Receipt"
                                             IsChecked="{x:Bind ViewModel.ShowLogo, Mode=TwoWay}"/>
                                    <TextBlock Text="Logo Path:" Style="{StaticResource LabelStyle}"
                                              Visibility="{x:Bind ViewModel.ShowLogo, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>
                                    <TextBox x:Name="LogoPathTextBox" PlaceholderText="Select logo file..."
                                            Text="{x:Bind ViewModel.LogoPath, Mode=TwoWay}"
                                            IsReadOnly="True"
                                            Visibility="{x:Bind ViewModel.ShowLogo, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>
                                </StackPanel>
                                
                                <StackPanel Grid.Column="1" Spacing="8">
                                    <Button Content="ðŸ“ Browse" Click="BrowseLogo_Click"
                                           Visibility="{x:Bind ViewModel.ShowLogo, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>
                                    <Button Content="Remove" Click="RemoveLogo_Click"
                                           Visibility="{x:Bind ViewModel.HasLogo, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>
                                </StackPanel>
                            </Grid>
                            
                            <!-- Logo Upload Progress and Status -->
                            <StackPanel x:Name="LogoStatusPanel" Spacing="8" Visibility="Collapsed">
                                <ProgressBar x:Name="LogoProgressBar" IsIndeterminate="True" Height="4"/>
                                <TextBlock x:Name="LogoStatusText" Text="Uploading logo..." 
                                          Style="{StaticResource LabelStyle}" FontSize="12"/>
                            </StackPanel>
                            
                            <!-- Logo Confirmation -->
                            <Border x:Name="LogoConfirmationPanel" Background="{StaticResource SystemFillColorSuccessBrush}" 
                                   CornerRadius="4" Padding="12,8" Visibility="Collapsed">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <TextBlock Text="âœ…" FontSize="16"/>
                                    <TextBlock x:Name="LogoConfirmationText" Text="Logo loaded successfully!" 
                                              Foreground="White" FontWeight="SemiBold"/>
                                </StackPanel>
                            </Border>
                            
                            <!-- Logo Error -->
                            <Border x:Name="LogoErrorPanel" Background="{StaticResource SystemFillColorCriticalBrush}" 
                                   CornerRadius="4" Padding="12,8" Visibility="Collapsed">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <TextBlock Text="âŒ" FontSize="16"/>
                                    <TextBlock x:Name="LogoErrorText" Text="Error loading logo" 
                                              Foreground="White" FontWeight="SemiBold"/>
                                </StackPanel>
                            </Border>
                            
                            <StackPanel Spacing="8" Visibility="{x:Bind ViewModel.ShowLogo, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}">
                                <TextBlock Text="Logo Size" Style="{StaticResource LabelStyle}"/>
                                <ComboBox x:Name="LogoSizeComboBox" SelectedIndex="{x:Bind ViewModel.LogoSizeIndex, Mode=TwoWay}">
                                    <ComboBoxItem Content="Small (32x32)"/>
                                    <ComboBoxItem Content="Medium (64x64)"/>
                                    <ComboBoxItem Content="Large (96x96)"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <StackPanel Spacing="8" Visibility="{x:Bind ViewModel.ShowLogo, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}">
                                <TextBlock Text="Logo Position" Style="{StaticResource LabelStyle}"/>
                                <ComboBox x:Name="LogoPositionComboBox" SelectedIndex="{x:Bind ViewModel.LogoPositionIndex, Mode=TwoWay}">
                                    <ComboBoxItem Content="Left"/>
                                    <ComboBoxItem Content="Center"/>
                                    <ComboBoxItem Content="Right"/>
                                </ComboBox>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Receipt Layout -->
                    <Border Style="{StaticResource ModernCardStyle}">
                        <StackPanel Spacing="12">
                            <TextBlock Text=" Receipt Layout" Style="{StaticResource SectionHeaderStyle}"/>
                            
                            <StackPanel Spacing="8">
                                <TextBlock Text="Qty and Price" Style="{StaticResource LabelStyle}"/>
                                <ComboBox x:Name="PaperSizeComboBox" SelectedIndex="{x:Bind ViewModel.PaperSizeIndex, Mode=TwoWay}">
                                    <ComboBoxItem Content="58mm Thermal"/>
                                    <ComboBoxItem Content="80mm Thermal"/>
                                    <ComboBoxItem Content="A4 Standard"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <StackPanel Spacing="8">
                                <TextBlock Text="Font Size" Style="{StaticResource LabelStyle}"/>
                                <Slider x:Name="FontSizeSlider" Minimum="8" Maximum="16" Value="{x:Bind ViewModel.FontSize, Mode=TwoWay}"
                                       StepFrequency="1" TickFrequency="1" TickPlacement="BottomRight"/>
                                <TextBlock Text="{x:Bind ViewModel.FontSize, Mode=OneWay}" HorizontalAlignment="Center" FontSize="12"/>
                            </StackPanel>
                            
                            <StackPanel Spacing="8">
                                <TextBlock Text="Line Spacing" Style="{StaticResource LabelStyle}"/>
                                <Slider x:Name="LineSpacingSlider" Minimum="1.0" Maximum="2.0" Value="{x:Bind ViewModel.LineSpacing, Mode=TwoWay}"
                                       StepFrequency="0.1" TickFrequency="0.1" TickPlacement="BottomRight"/>
                                <TextBlock Text="{x:Bind ViewModel.LineSpacing, Mode=OneWay}" HorizontalAlignment="Center" FontSize="12"/>
                            </StackPanel>
                            
                            <StackPanel Spacing="8">
                                <TextBlock Text="Margins (mm)" Style="{StaticResource LabelStyle}"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0" Spacing="4" Margin="0,0,4,0">
                                        <TextBlock Text="Left/Right" FontSize="12"/>
                                        <NumberBox x:Name="HorizontalMarginNumberBox" Value="{x:Bind ViewModel.HorizontalMargin, Mode=TwoWay}"
                                                  Minimum="0" Maximum="20" SpinButtonPlacementMode="Inline"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" Spacing="4" Margin="4,0,0,0">
                                        <TextBlock Text="Top/Bottom" FontSize="12"/>
                                        <NumberBox x:Name="VerticalMarginNumberBox" Value="{x:Bind ViewModel.VerticalMargin, Mode=TwoWay}"
                                                  Minimum="0" Maximum="20" SpinButtonPlacementMode="Inline"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Receipt Content -->
                    <Border Style="{StaticResource ModernCardStyle}">
                        <StackPanel Spacing="12">
                            <TextBlock Text="ðŸ“ Receipt Content" Style="{StaticResource SectionHeaderStyle}"/>
                            
                            <CheckBox x:Name="ShowDateTimeCheckBox" Content="Show Date and Time"
                                     IsChecked="{x:Bind ViewModel.ShowDateTime, Mode=TwoWay}"/>
                            <CheckBox x:Name="ShowTableNumberCheckBox" Content="Show Table Number"
                                     IsChecked="{x:Bind ViewModel.ShowTableNumber, Mode=TwoWay}"/>
                            <CheckBox x:Name="ShowServerNameCheckBox" Content="Show Server Name"
                                     IsChecked="{x:Bind ViewModel.ShowServerName, Mode=TwoWay}"/>
                            <CheckBox x:Name="ShowItemDetailsCheckBox" Content="Show Item Details"
                                     IsChecked="{x:Bind ViewModel.ShowItemDetails, Mode=TwoWay}"/>
                            <CheckBox x:Name="ShowSubtotalCheckBox" Content="Show Subtotal"
                                     IsChecked="{x:Bind ViewModel.ShowSubtotal, Mode=TwoWay}"/>
                            <CheckBox x:Name="ShowTaxCheckBox" Content="Show Tax"
                                     IsChecked="{x:Bind ViewModel.ShowTax, Mode=TwoWay}"/>
                            <CheckBox x:Name="ShowDiscountCheckBox" Content="Show Discount"
                                     IsChecked="{x:Bind ViewModel.ShowDiscount, Mode=TwoWay}"/>
                            <CheckBox x:Name="ShowPaymentMethodCheckBox" Content="Show Payment Method"
                                     IsChecked="{x:Bind ViewModel.ShowPaymentMethod, Mode=TwoWay}"/>
                            
                            <StackPanel Spacing="8">
                                <TextBlock Text="Footer Message" Style="{StaticResource LabelStyle}"/>
                                <TextBlock Text="Footer Message:" Margin="0,0,0,5"/>
                                <TextBox x:Name="FooterMessageTextBox" 
                                         Text="{x:Bind ViewModel.FooterMessage, Mode=TwoWay}" 
                                         AcceptsReturn="True" 
                                         TextWrapping="Wrap" 
                                         Height="60" 
                                         ScrollViewer.VerticalScrollBarVisibility="Auto"/>
                        
                                <!-- Print Settings -->
                                <TextBlock Text="Print Settings:" FontWeight="Bold" Margin="0,15,0,5"/>
                                <CheckBox x:Name="ShowPreviewCheckBox" 
                                          Content="Show preview before printing" 
                                          IsChecked="{x:Bind ViewModel.ShowPreviewBeforePrinting, Mode=TwoWay}" 
                                          Margin="0,5"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Tax Settings -->
                    <Border Style="{StaticResource ModernCardStyle}">
                        <StackPanel Spacing="12">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE8B9;" FontSize="16" Foreground="{ThemeResource AccentFillColorDefaultBrush}"/>
                                <TextBlock Text="Tax Settings" Style="{StaticResource SectionHeaderStyle}"/>
                            </StackPanel>
                            
                            <StackPanel Spacing="8">
                                <TextBlock Text="Tax Rate (%)" Style="{StaticResource LabelStyle}"/>
                                <NumberBox x:Name="TaxRateNumberBox" Value="{x:Bind ViewModel.TaxRate, Mode=TwoWay}"
                                          Minimum="0" Maximum="50" SpinButtonPlacementMode="Inline"/>
                            </StackPanel>
                            
                            <StackPanel Spacing="8">
                                <TextBlock Text="Tax Label" Style="{StaticResource LabelStyle}"/>
                                <TextBox x:Name="TaxLabelTextBox" PlaceholderText="GST/HST/VAT"
                                        Text="{x:Bind ViewModel.TaxLabel, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                            </StackPanel>
                            
                            <CheckBox x:Name="TaxInclusiveCheckBox" Content="Tax Inclusive Pricing"
                                     IsChecked="{x:Bind ViewModel.TaxInclusive, Mode=TwoWay}"/>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Preview Panel -->
                <StackPanel Grid.Column="2" Spacing="16">
                    
                    <!-- Preview Controls -->
                    <Border Style="{StaticResource ModernCardStyle}">
                        <StackPanel Spacing="12">
                            <TextBlock Text="ðŸ‘ï¸ Live Preview" Style="{StaticResource SectionHeaderStyle}"/>
                            
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <ToggleButton x:Name="ProFormaToggle" Grid.Column="0" Content="Pro-forma Receipt" 
                                             IsChecked="True" Margin="0,0,4,0" Click="PreviewType_Changed"/>
                                <ToggleButton x:Name="FinalToggle" Grid.Column="1" Content="Final Receipt" 
                                             Margin="4,0,0,0" Click="PreviewType_Changed"/>
                            </Grid>
                            
                            <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center">
                                <Button Content="Refresh Preview" Click="RefreshPreview_Click"/>
                                <Button Content="ðŸ–¨ï¸ Test Print" Click="TestPrint_Click"/>
                                <Button Content="ðŸ’¾ Export PDF" Click="ExportPdf_Click"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Pro-forma Preview -->
                    <Border Style="{StaticResource PreviewCardStyle}" 
                           Visibility="{x:Bind ProFormaToggle.IsChecked, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}">
                        <StackPanel Spacing="8">
                            <TextBlock Text="Pro-forma Receipt Preview" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                            <ScrollViewer x:Name="ProFormaPreviewScrollViewer" MaxHeight="600" VerticalScrollBarVisibility="Auto">
                                <Border x:Name="ProFormaPreviewContainer" Background="White" Padding="12" CornerRadius="4"
                                       BorderBrush="#E0E0E0" BorderThickness="1">
                                    <!-- Preview content will be generated here -->
                                </Border>
                            </ScrollViewer>
                        </StackPanel>
                    </Border>

                    <!-- Final Receipt Preview -->
                    <Border Style="{StaticResource PreviewCardStyle}"
                           Visibility="{x:Bind FinalToggle.IsChecked, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}">
                        <StackPanel Spacing="8">
                            <TextBlock Text="Final Receipt Preview" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                            <ScrollViewer x:Name="FinalPreviewScrollViewer" MaxHeight="600" VerticalScrollBarVisibility="Auto">
                                <Border x:Name="FinalPreviewContainer" Background="White" Padding="12" CornerRadius="4"
                                       BorderBrush="#E0E0E0" BorderThickness="1">
                                    <!-- Preview content will be generated here -->
                                </Border>
                            </ScrollViewer>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>
        </ScrollViewer>

        <!-- Status Bar -->
        <Border Grid.Row="2" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" Padding="16,12" BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}" BorderThickness="0,1,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock x:Name="StatusTextBlock" Grid.Column="0" Text="Ready to design your receipt format"
                          VerticalAlignment="Center" Foreground="{StaticResource TextSecondaryBrush}"/>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                    <TextBlock Text="Last Saved:" VerticalAlignment="Center" Foreground="{StaticResource TextSecondaryBrush}"/>
                    <TextBlock x:Name="LastSavedTextBlock" Text="Never" VerticalAlignment="Center" 
                              Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Page>
