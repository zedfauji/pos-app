<Page
    x:Class="MagiDesk.Frontend.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
    <Grid Padding="24">
        <StackPanel Spacing="12" Width="560">
            <TextBlock x:Name="TitleText" Text="Settings" FontSize="24" FontWeight="SemiBold"/>
            <Pivot>
                <!-- API Settings Tab -->
                <PivotItem Header="API Settings">
                    <StackPanel Spacing="8">
                        <TextBlock Text="Configure backend URLs" FontWeight="SemiBold"/>
                        <TextBlock x:Name="BackendUrlLabel" Text="Backend Base URL"/>
                        <TextBox x:Name="BaseUrlText" PlaceholderText="https://localhost:7016"/>
                        <TextBlock Text="Settings API URL"/>
                        <TextBox x:Name="SettingsApiUrlText" PlaceholderText="https://.../settings"/>
                        <TextBlock Text="Settings Host (Firestore key)"/>
                        <TextBox x:Name="SettingsHostText" PlaceholderText="store-1"/>
                        <TextBlock Text="Tables API URL"/>
                        <TextBox x:Name="TablesApiUrlText" PlaceholderText="https://.../tables"/>
                        <TextBlock Text="Printer Settings" FontWeight="SemiBold" Margin="0,8,0,0"/>
                        <StackPanel Orientation="Horizontal" Spacing="12">
                            <StackPanel>
                                <TextBlock Text="Paper Width"/>
                                <ComboBox x:Name="PrinterWidthCombo" SelectedIndex="0" Width="120">
                                    <ComboBoxItem Content="58 mm" Tag="58"/>
                                    <ComboBoxItem Content="80 mm" Tag="80"/>
                                </ComboBox>
                            </StackPanel>
                            <StackPanel>
                                <TextBlock Text="Tax %"/>
                                <TextBox x:Name="TaxPercentText" PlaceholderText="8.5" Width="100"/>
                            </StackPanel>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="12">
                            <Button x:Name="SaveApiButton" Content="Save API URLs" Click="SaveApi_Click"/>
                            <Button x:Name="PingApisButton" Content="Refresh Status" Click="PingApis_Click"/>
                            <Button x:Name="TestPrintButton" Content="Print test receipt" Click="TestPrint_Click"/>
                        </StackPanel>
                        <StackPanel Spacing="6">
                            <StackPanel Orientation="Horizontal" Spacing="6" VerticalAlignment="Center">
                                <Ellipse x:Name="BackendStatusDot" Width="10" Height="10" Fill="Gray" VerticalAlignment="Center"/>
                                <TextBlock x:Name="BackendSummaryText" Text="Backend: -"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Spacing="6" VerticalAlignment="Center">
                                <Ellipse x:Name="SettingsStatusDot" Width="10" Height="10" Fill="Gray" VerticalAlignment="Center"/>
                                <TextBlock x:Name="SettingsStatusText" Text="Settings API: -"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Spacing="6" VerticalAlignment="Center">
                                <Ellipse x:Name="TablesStatusDot" Width="10" Height="10" Fill="Gray" VerticalAlignment="Center"/>
                                <TextBlock x:Name="TablesStatusText" Text="Tables API: -"/>
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </PivotItem>

                <!-- Main UI Settings Tab -->
                <PivotItem Header="Main UI Settings">
                    <StackPanel Spacing="8">
                        <TextBlock x:Name="ThemeLabel" Text="Theme"/>
                        <ComboBox x:Name="ThemeSelector" SelectedIndex="0">
                            <ComboBoxItem Content="System"/>
                            <ComboBoxItem Content="Dark"/>
                            <ComboBoxItem Content="Light"/>
                        </ComboBox>
                        <TextBlock x:Name="ThemeHint" Text="System uses Windows theme" Opacity="0.7" FontSize="12"/>
                        <Button x:Name="SaveButton" Content="Save" Click="Save_Click" HorizontalAlignment="Left"/>
                        <TextBlock x:Name="ThemeSummaryText" Text="Theme: -"/>
                    </StackPanel>
                </PivotItem>

                <!-- App Settings Tab -->
                <PivotItem Header="App Settings">
                    <StackPanel Spacing="8">
                        <TextBlock x:Name="AppSummaryText" Text="App Settings: -"/>
                        <Button x:Name="EditAppSettingsButton" Content="Edit App Settings" Click="EditAppSettings_Click" HorizontalAlignment="Left"/>
                    </StackPanel>
                </PivotItem>

                <!-- Table Settings Tab -->
                <PivotItem Header="Table Settings">
                    <StackPanel Spacing="8">
                        <TextBlock x:Name="CurrentRateText" Text="Current Rate: -"/>
                        <Button x:Name="EditRateButton" Content="Edit Rate" Click="EditRate_Click" HorizontalAlignment="Left"/>
                    </StackPanel>
                </PivotItem>
            </Pivot>
            <TextBlock x:Name="StatusText"/>
        </StackPanel>
    </Grid>
</Page>
